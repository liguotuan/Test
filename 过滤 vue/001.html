<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Document</title>
</head>
<body>
<input type="" id="input" name="">
<ul id="ul"></ul>

    <div id="test" style="position: fixed;">
        <input type="" name="" v-model="search">
        <ul>
            <li v-for="(p,index) in fPersons" :key="index">
                {{index}}--{{p.name}}--{{p.age}}
            </li>

        </ul>
        <button type="" @click="setOrder(0)">原序</button>
        <button type="" @click="setOrder(1)">升序</button>
        <button type="" @click="setOrder(2)">降序</button>

    </div>
</body>
<script src="vue.min.js"></script>
<script>
    window.onload = function(){
        input = document.getElementById("input")
        ul = document.getElementById("ul")

        var arr = ['a','b','c','c','abc','kjg','abcdefg']

        input.addEventListener('focus', function(){
            ul.style.display = "block"
        },false)

        input.addEventListener('input',function(event){
            var _value = event.target.value
            if(_value){
                auto(_value,arr)

            }else{
               ul.innerHTML = ""

            }

        },false)

        ul.addEventListener('click', function(event){
            var target = event.target
            if(target.nodeName.toUpperCase() == 'LI'){
                addToInput(target)
            }
            ul.style.display = "none"

        }, false)

        function addToInput(li){
            var _txt = li.innerText
            input.value = _txt


        }

        function auto(str,arr){
            var lis = []
            arr.forEach(function(element){
                if(element.includes(str)){
                    lis.push(`<li>${element}</li>`)

                }

            })
            console.log(ul.innerHTML);
            ul.innerHTML = lis.join('')
            console.log(ul.innerHTML);

        }

        new Vue({
            el:"#test",
            data:{
                persons:[
                    {name:"p1",age:15},
                    {name:'p2',age:16},
                    {name:'p3',age:12},
                    {name:'p4',age:15},
                    {name:'p5',age:13}

                ],
                search:'',
                order:0,    /* 0为原本顺序 1为升序 2为降序*/



            },
            methods:{
                setOrder(order){
                   this.order = order

                }

            },

            computed:{
                fPersons:function(){
                   const {search,persons,order} = this


                   let one
                        one = persons.filter(function(p){
                            return Object.keys(p).some(function(key){
                                return String(p[key]).toLowerCase().indexOf(search) !== -1
                            })
                        })


                    if(order!==0){
                            one.sort(function(p1,p2){
                                if(order==2){
                                    return p2.age - p1.age

                                }else{
                                    return p1.age - p2.age
                                }

                            })
                        }





                     return one

                }


            }

        })


    }

</script>
</html>